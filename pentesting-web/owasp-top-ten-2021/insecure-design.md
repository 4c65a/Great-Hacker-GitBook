---
layout:
  title:
    visible: true
  description:
    visible: false
  tableOfContents:
    visible: true
  outline:
    visible: true
  pagination:
    visible: true
---

# Insecure Design

El diseño inseguro es una categoría amplia que representa diferentes debilidades, expresadas como "diseño de control faltante o ineficaz". El diseño inseguro no es la fuente de todas las demás categorías de riesgo principales. Existe una diferencia entre diseño inseguro e implementación insegura. Diferenciamos entre fallas de diseño y defectos de implementación por una razón: tienen diferentes causas fundamentales y remediaciones. Un diseño seguro aún puede tener defectos de implementación que generen vulnerabilidades que pueden explotarse. Un diseño inseguro no puede solucionarse mediante una implementación perfecta ya que, por definición, nunca se crearon los controles de seguridad necesarios para defenderse contra ataques específicos. Uno de los factores que contribuye al diseño inseguro es la falta de un perfil de riesgo empresarial inherente al software o sistema que se está desarrollando y, por tanto, la imposibilidad de determinar qué nivel de diseño de seguridad se requiere.

#### Gestión de requisitos y recursos <a href="#requirements-and-resource-management" id="requirements-and-resource-management"></a>

Recopile y negocie los requisitos comerciales para una aplicación con la empresa, incluidos los requisitos de protección relacionados con la confidencialidad, integridad, disponibilidad y autenticidad de todos los activos de datos y la lógica comercial esperada. Tenga en cuenta qué tan expuesta estará su aplicación y si necesita segregación de inquilinos (adicionalmente al control de acceso). Recopilar los requisitos técnicos, incluidos los requisitos de seguridad funcionales y no funcionales. Planifique y negocie el presupuesto que cubra todo el diseño, construcción, pruebas y operación, incluidas las actividades de seguridad.

#### Diseño seguro <a href="#secure-design" id="secure-design"></a>

El diseño seguro es una cultura y una metodología que evalúa constantemente las amenazas y garantiza que el código esté diseñado y probado de manera sólida para prevenir métodos de ataque conocidos. El modelado de amenazas debe integrarse en sesiones de refinamiento (o actividades similares); buscar cambios en los flujos de datos y el control de acceso u otros controles de seguridad. En el desarrollo de la historia del usuario, determine el flujo correcto y los estados de falla, asegúrese de que sean bien comprendidos y acordados por las partes responsables y afectadas. Analice las suposiciones y condiciones para los flujos esperados y de fallas, asegúrese de que sigan siendo precisas y deseables. Determinar cómo validar las suposiciones y hacer cumplir las condiciones necesarias para comportamientos adecuados. Asegúrese de que los resultados estén documentados en la historia del usuario. Aprender de los errores y ofrecer incentivos positivos para promover mejoras. El diseño seguro no es un complemento ni una herramienta que pueda agregarse al software.

#### Ciclo de vida de desarrollo seguro <a href="#secure-development-lifecycle" id="secure-development-lifecycle"></a>

El software seguro requiere un ciclo de vida de desarrollo seguro, alguna forma de patrón de diseño seguro, una metodología pavimentada, una biblioteca de componentes seguros, herramientas y modelado de amenazas. Comuníquese con sus especialistas en seguridad al comienzo de un proyecto de software durante todo el proyecto y el mantenimiento de su software. Considere aprovechar el [modelo de madurez de garantía de software (SAMM) de OWASP](https://owaspsamm.org/) para ayudar a estructurar sus esfuerzos de desarrollo de software seguro.

### Como prevenir <a href="#how-to-prevent" id="how-to-prevent"></a>

* Establezca y utilice un ciclo de vida de desarrollo seguro con profesionales de AppSec para ayudar a evaluar y diseñar controles relacionados con la seguridad y la privacidad.
* Establecer y utilizar una biblioteca de patrones de diseño seguros o componentes de caminos pavimentados listos para usar.
* Utilice modelos de amenazas para autenticación crítica, control de acceso, lógica empresarial y flujos de claves.
* Integre el lenguaje y los controles de seguridad en las historias de los usuarios
* Integre comprobaciones de plausibilidad en cada nivel de su aplicación (desde el frontend hasta el backend)
* Escriba pruebas unitarias y de integración para validar que todos los flujos críticos sean resistentes al modelo de amenazas. Compile casos de uso _y_ casos de uso incorrecto para cada nivel de su aplicación.
* Segregar capas de niveles en el sistema y las capas de red según las necesidades de exposición y protección.
* Segregar sólidamente a los inquilinos mediante diseño en todos los niveles.
* Limitar el consumo de recursos por usuario o servicio

### Ejemplos de escenarios de ataque <a href="#example-attack-scenarios" id="example-attack-scenarios"></a>

**Escenario #1:** Un flujo de trabajo de recuperación de credenciales puede incluir “preguntas y respuestas”, lo cual está prohibido por NIST 800-63b, OWASP ASVS y OWASP Top 10. No se puede confiar en las preguntas y respuestas como prueba de identidad de más de una persona. pueden saber las respuestas, por eso están prohibidas. Dicho código debería eliminarse y sustituirse por un diseño más seguro.

**Escenario n.º 2:** una cadena de cines permite descuentos por reservas para grupos y tiene un máximo de quince asistentes antes de exigir un depósito. Los atacantes podrían amenazar con modelar este flujo y probar si podían reservar seiscientas localidades y todos los cines a la vez con unas pocas solicitudes, lo que provocaría una enorme pérdida de ingresos.

**Escenario n.° 3:** el sitio web de comercio electrónico de una cadena minorista no tiene protección contra robots dirigidos por revendedores que compran tarjetas de video de alta gama para revender sitios web de subastas. Esto crea una publicidad terrible para los fabricantes de tarjetas de video y los propietarios de cadenas minoristas y un rencor duradero con los entusiastas que no pueden obtener estas tarjetas a ningún precio. Un diseño cuidadoso anti-bot y reglas lógicas de dominio, como compras realizadas a los pocos segundos de estar disponibles, podrían identificar compras no auténticas y rechazar dichas transacciones.

### Lista de Mapeados CWEs

[CWE-73 External Control of File Name or Path](https://cwe.mitre.org/data/definitions/73.html)

[CWE-183 Permissive List of Allowed Inputs](https://cwe.mitre.org/data/definitions/183.html)

[CWE-209 Generation of Error Message Containing Sensitive Information](https://cwe.mitre.org/data/definitions/209.html)

[CWE-213 Exposure of Sensitive Information Due to Incompatible Policies](https://cwe.mitre.org/data/definitions/213.html)

[CWE-235 Improper Handling of Extra Parameters](https://cwe.mitre.org/data/definitions/235.html)

[CWE-256 Unprotected Storage of Credentials](https://cwe.mitre.org/data/definitions/256.html)

[CWE-257 Storing Passwords in a Recoverable Format](https://cwe.mitre.org/data/definitions/257.html)

[CWE-266 Incorrect Privilege Assignment](https://cwe.mitre.org/data/definitions/266.html)

[CWE-269 Improper Privilege Management](https://cwe.mitre.org/data/definitions/269.html)

[CWE-280 Improper Handling of Insufficient Permissions or Privileges](https://cwe.mitre.org/data/definitions/280.html)

[CWE-311 Missing Encryption of Sensitive Data](https://cwe.mitre.org/data/definitions/311.html)

[CWE-312 Cleartext Storage of Sensitive Information](https://cwe.mitre.org/data/definitions/312.html)

[CWE-313 Cleartext Storage in a File or on Disk](https://cwe.mitre.org/data/definitions/313.html)

[CWE-316 Cleartext Storage of Sensitive Information in Memory](https://cwe.mitre.org/data/definitions/316.html)

[CWE-419 Unprotected Primary Channel](https://cwe.mitre.org/data/definitions/419.html)

[CWE-430 Deployment of Wrong Handler](https://cwe.mitre.org/data/definitions/430.html)

[CWE-434 Unrestricted Upload of File with Dangerous Type](https://cwe.mitre.org/data/definitions/434.html)

[CWE-444 Inconsistent Interpretation of HTTP Requests ('HTTP Request Smuggling')](https://cwe.mitre.org/data/definitions/444.html)

[CWE-451 User Interface (UI) Misrepresentation of Critical Information](https://cwe.mitre.org/data/definitions/451.html)

[CWE-472 External Control of Assumed-Immutable Web Parameter](https://cwe.mitre.org/data/definitions/472.html)

[CWE-501 Trust Boundary Violation](https://cwe.mitre.org/data/definitions/501.html)

[CWE-522 Insufficiently Protected Credentials](https://cwe.mitre.org/data/definitions/522.html)

[CWE-525 Use of Web Browser Cache Containing Sensitive Information](https://cwe.mitre.org/data/definitions/525.html)

[CWE-539 Use of Persistent Cookies Containing Sensitive Information](https://cwe.mitre.org/data/definitions/539.html)

[CWE-579 J2EE Bad Practices: Non-serializable Object Stored in Session](https://cwe.mitre.org/data/definitions/579.html)

[CWE-598 Use of GET Request Method With Sensitive Query Strings](https://cwe.mitre.org/data/definitions/598.html)

[CWE-602 Client-Side Enforcement of Server-Side Security](https://cwe.mitre.org/data/definitions/602.html)

[CWE-642 External Control of Critical State Data](https://cwe.mitre.org/data/definitions/642.html)

[CWE-646 Reliance on File Name or Extension of Externally-Supplied File](https://cwe.mitre.org/data/definitions/646.html)

[CWE-650 Trusting HTTP Permission Methods on the Server Side](https://cwe.mitre.org/data/definitions/650.html)

[CWE-653 Insufficient Compartmentalization](https://cwe.mitre.org/data/definitions/653.html)

[CWE-656 Reliance on Security Through Obscurity](https://cwe.mitre.org/data/definitions/656.html)

[CWE-657 Violation of Secure Design Principles](https://cwe.mitre.org/data/definitions/657.html)

[CWE-799 Improper Control of Interaction Frequency](https://cwe.mitre.org/data/definitions/799.html)

[CWE-807 Reliance on Untrusted Inputs in a Security Decision](https://cwe.mitre.org/data/definitions/807.html)

[CWE-840 Business Logic Errors](https://cwe.mitre.org/data/definitions/840.html)

[CWE-841 Improper Enforcement of Behavioral Workflow](https://cwe.mitre.org/data/definitions/841.html)

[CWE-927 Use of Implicit Intent for Sensitive Communication](https://cwe.mitre.org/data/definitions/927.html)

[CWE-1021 Improper Restriction of Rendered UI Layers or Frames](https://cwe.mitre.org/data/definitions/1021.html)

[CWE-1173 Improper Use of Validation Framework](https://cwe.mitre.org/data/definitions/1173.html)

<mark style="color:red;">**Recursos**</mark>

{% embed url="https://owasp.org/Top10/A04_2021-Insecure_Design/" %}
