---
layout:
  title:
    visible: true
  description:
    visible: false
  tableOfContents:
    visible: true
  outline:
    visible: true
  pagination:
    visible: true
---

# 53:DNS

### Que son los DNS?

[DNS](../networks/dns.md) o llamado el sistema de nombres de dominios ([The Domain Name System](https://www.cloudflare.com/learning/dns/what-is-dns/)),lo que hace es asignarle un nombre a una dirección IP,por defecto este tiene el puerto 53/tcp/udp o 5353/udp.

### Detectar el puerto 53 DNS con nmap

```bash
nmap -sU -p- 192.168.0.1
```

```bash
nmap -sU -p 53 192.168.0.1
```

### Enumeración&#x20;

Es el proceso por el cual se localiza todos los servidores DNS y poder obtener un poco mas de información de la empresa.

#### Este proceso te dará información de:

* Nombres de usuarios
* Nombres de computadoras
* Nombres de servidores DNS/IP
* Versiones de software de servidores DNS
* Opciones de configuración de servidores DNS
* Zonas DNS

```bash
dnsrecon -d google.com
```

### Recuperación de registros DNS

```bash
dnsrecon -d google.com -t std
```

### DNS zone transfer

Es una técnica de reconocimiento que se utiliza para obtener una copia de la zona [DNS](../networks/dns.md) de un dominio. La zona DNS contiene información sobre los [registros DNS](https://www.cloudflare.com/es-es/learning/dns/dns-records/) del dominio.

| Registro | Significado                                                                                                                                              |
| -------- | -------------------------------------------------------------------------------------------------------------------------------------------------------- |
| A        | registro que contiene la dirección IP de un dominio.                                                                                                     |
| AAAA     | El registro que contiene la dirección IPv6 de un dominio (a diferencia de los registros A, que enumeran la dirección IPv4).                              |
| CNAME    | reenvía un dominio o subdominio a otro dominio, NO proporciona una dirección IP.                                                                         |
| MX       | dirige el correo a un servidor de correo electrónico.                                                                                                    |
| TXT      | Permite que un administrador pueda almacenar notas de texto en el registro. Estos registros se suelen utilizar para la seguridad del correo electrónico. |
| NS       | almacena el servidor de nombres para una entrada DNS                                                                                                     |
| SOA      | almacena la información del administrador sobre un dominio                                                                                               |
| SRV      | especifica un puerto para servicios específicos                                                                                                          |
| PTR      | proporciona un nombre de dominio en búsquedas inversas.                                                                                                  |

```bash
dig <DOMINIO> +short -t ns 
```

<pre class="language-bash"><code class="lang-bash"><strong>dnsrecon -d google.com -t axfr
</strong></code></pre>

```bash
nslookup -type=axfr @<DNS_IP> <DOMINIO>
```

```bash
dig axfr @<DNS_IP>
dig axfr @<DNS_IP> <DOMAIN>
```

```bash
dig +short nx google.com
dig axfr google.com @ns2.google.com
```

```bash
host -t axfr google.com ns2.google.com
```

```bash
host -l google.com ns2.google.com
```

### Comando dig

Te devuelve el registro A que contiene la dirección IP del dominio

```bash
dig google.com +short
```

Registros de servidores de correo

<pre class="language-bash"><code class="lang-bash"><strong>dig google.com -t mx +short
</strong></code></pre>

Registros DNS

```bash
dig google.com -t ns +short
```

Transferencia de zona

```bash
dig AXFR google.com ns3.google.com
```

Reverse lookup

```bash
dig -x <dirección IP>
```

### Comando host

Obtener registros DNS

```bash
host google.com
```

Registros ns

```bash
host -t ns google.com
```

Transferencia de zona&#x20;

```bash
host -t axfr google.com ns2.google.com
```

```bash
host -l google.com ns2.google.com
```

Reverse lookup

```bash
host -l 192.168.1.1
```

### Reverse Lookup

```bash
dnsrecon -r 173.158.10.1/16
```

```bash
dig -x 173.158.10.1/16
```

```bash
host -l 192.168.1.1
```

```bash
nslookup -type=ptr 192.168.1.1
```

### DNS nmap script

```bash
nmap --script=broadcast-dns-service-discovery google.com
```

### DNS nmap script brute&#x20;

```bash
nmap -T4 -p 53 --script dns-brute
```

