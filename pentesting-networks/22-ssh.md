---
layout:
  title:
    visible: true
  description:
    visible: false
  tableOfContents:
    visible: true
  outline:
    visible: true
  pagination:
    visible: true
---

# 22:SSH

Es un protocolo que tiene como función ofrecer acceso remoto a un servidor. La principal peculiaridad es que este acceso es seguro, ya que toda la información va cifrada.

**Por default tiene el puerto:**

```bash
22/tcp open  ssh 
```

## Escanear con nmap

```
nmap -sV -sC --open 192.168.1.251
```

### Script

```bash
nmap -p22 <ip> --script ssh2-enum-algos 
nmap -p 22 --script ssh-brute 
nmap -p22 <ip> --script ssh-hostkey --script-args ssh_hostkey=full 
nmap -p22 <ip> --script ssh-auth-methods --script-args="ssh.user=root" 
nmap -sV --script="ssh* and note brute" -p22 192.168.1.251 -oN ssh_script_scan.nmap
```

### Enumeracion

```
nmap -p 22 192.168.1.251
```

```bash
nmap -sV -p 22 --script ssh-brute 192.168.1.251
```

```
nmap -p 22 -v --open 192.168.1.251
```

```bash
nmap -sV -p 22 -A 192.168.1.251
```

```bash
nmap -sV -p 22 192.168.1.251
```

## Conectar a ssh

```bash
ssh test@192.168.1.251
ssh test@192.168.1.251 -p 22

# Usando clave privada
ssh -i id_rsa test@192.168.1.251
#Sin usuario
ssh 192.168.1.251
```

### **Ejecuta comando antes de iniciar**

```bash
ssh test@192.168.1.251 -p 22 'ls -l'
```

## **Comandos básicos**&#x20;

**Start**

```sh
sudo systemctl start ssh
```

**Stop**

```sh
sudo systemctl stop ssh
```

**Restart**

```sh
sudo systemctl restart ssh
```

#### Status <a href="#status" id="status"></a>

```sh
sudo systemctl status ssh
```



<mark style="color:red;">**Recursos**</mark>

{% embed url="https://exploit-notes.hdks.org/exploit/network/protocol/ssh-pentesting/" %}

{% embed url="https://book.hacktricks.xyz/v/es/network-services-pentesting/pentesting-ssh" %}

{% embed url="https://secybr.com/posts/ssh-pentesting-best-practices/" %}
